# CatJamSynced (PulseSync / Яндекс Музыка)

Аддон для PulseSync, который добавляет `catjam.webm` в нижний бар Яндекс Музыки рядом с кнопкой лайка.

## Что делает
- Показывает кота в нижнем баре справа от кнопки лайка (`data-test-id="LIKE_BUTTON"`).
- Скрывает кота, когда открыто модальное окно/попап в приложении.
- Синхронизирует состояние с плеером:
  - если трек играет — кот играет;
  - если пауза — кот на паузе.
- Может ресинхронизировать анимацию по PulseSync pulse (без изменения скорости).

## Что НЕ делает
- Не меняет скорость кота по BPM трека.
- Не использует внешний API BPM.

## Структура
- `metadata.json` — метаданные аддона.
- `handleEvents.json` — настройки в PulseSync UI.
- `script.js` — логика аддона.
- `style.css` — стили контейнеров/видео.
- `image.png` — лого.
- `banner.jpg` — баннер.
- `catjam.webm` — анимация кота.

## Настройки (handleEvents)
- `Enabled` — вкл/выкл аддона.
- `Sync To Pulse` — ресинк анимации по pulse-событиям (только ресинк, не BPM).
- `Fallback Speed %` — постоянная скорость воспроизведения кота.
- `Custom WebM URL` — внешний URL `.webm` (опционально).

## Установка
1. Помести папку аддона в директорию тем/аддонов PulseSync.
2. Убедись, что в `metadata.json` указан `"type": "script"` и `"script": "script.js"`.
3. Включи аддон в PulseSync.
4. Перезапусти приложение Яндекс Музыки (если нужно).

## Отладка
В `script.js` включён debug-лог (`DEBUG_LOG = true`).

В консоли можно увидеть строки вида:
- `[CATJAM DEBUG] playing=true rate=1.000 pulseFound=true pulseDurMs=...`

Если логов слишком много, поставь `DEBUG_LOG = false`.

## Частые проблемы
- Кота не видно:
  - проверь, что аддон включён;
  - проверь, что внизу есть кнопка лайка;
  - закрой модальные окна/попапы.
- Кот не появляется при кастомном URL:
  - проверь прямую ссылку на `.webm`;
  - отключи блокировщик/фильтры, если они режут загрузку.

## Версия
Текущая версия указана в `metadata.json`.
